<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Network on Aurora</title><link>https://notes.yoooo.fun/categories/network/</link><description>Recent content in Network on Aurora</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 24 Nov 2023 10:45:42 +0000</lastBuildDate><atom:link href="https://notes.yoooo.fun/categories/network/index.xml" rel="self" type="application/rss+xml"/><item><title>Check Network Availability</title><link>https://notes.yoooo.fun/posts/net-check/</link><pubDate>Fri, 24 Nov 2023 10:45:42 +0000</pubDate><guid>https://notes.yoooo.fun/posts/net-check/</guid><description>&lt;h1 id="check-network-availability"&gt;Check Network Availability
&lt;/h1&gt;&lt;p&gt;The following commands can be used to check if a remote host is available on the network.&lt;/p&gt;
&lt;p&gt;Here is an example to check if port 22 on 192.168.21.32 is open.&lt;/p&gt;
&lt;h2 id="linux"&gt;Linux
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;nc -zv 192.168.21.32 &lt;span class="m"&gt;22&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# or&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;nmap -p &lt;span class="m"&gt;22&lt;/span&gt; 192.168.21.32
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# or, if no output, port is open&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;timeout &lt;span class="m"&gt;1&lt;/span&gt; bash -c &lt;span class="s1"&gt;&amp;#39;cat &amp;lt; /dev/null &amp;gt; /dev/tcp/192.168.21.32/22&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &amp;gt;/dev/tcp/192.168.21.32/22
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="windows"&gt;Windows
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;telnet 192.168.21.32 &lt;span class="m"&gt;22&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# or (PowerShell)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Test-NetConnection -ComputerName 192.168.21.32 -Port &lt;span class="m"&gt;22&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>Http Version Comparison</title><link>https://notes.yoooo.fun/posts/http-version/</link><pubDate>Wed, 16 Sep 2020 10:53:10 +0000</pubDate><guid>https://notes.yoooo.fun/posts/http-version/</guid><description>&lt;h1 id="http"&gt;HTTP
&lt;/h1&gt;&lt;h2 id="preview"&gt;Preview
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: center"&gt;Year&lt;/th&gt;
&lt;th style="text-align: center"&gt;HTTP Version&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;1996&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;a class="link" href="https://tools.ietf.org/html/rfc1945" target="_blank" rel="noopener"
&gt;1.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;1997&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;a class="link" href="https://tools.ietf.org/html/rfc2616" target="_blank" rel="noopener"
&gt;1.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;2000&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;a class="link" href="https://tools.ietf.org/html/rfc2818" target="_blank" rel="noopener"
&gt;HTTPS&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;2015&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;a class="link" href="https://tools.ietf.org/html/rfc7540" target="_blank" rel="noopener"
&gt;2.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;???&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;a class="link" href="https://tools.ietf.org/html/draft-ietf-quic-http" target="_blank" rel="noopener"
&gt;3.0 Draft&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img src="https://notes.yoooo.fun/assets/HTTP-v1-v2-v3-stacks.png"
loading="lazy"
alt="HTTP_Version"
&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src="https://notes.yoooo.fun/assets/http1-265x300.png"
loading="lazy"
alt="HTTP1 Protocol"
&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src="https://notes.yoooo.fun/assets/http1.1-265x300.png"
loading="lazy"
alt="HTTP1.1 Protocol"
&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src="https://notes.yoooo.fun/assets/http2-283x300.png"
loading="lazy"
alt="HTTP2 Protocol"
&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;HTTP/1.0&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For every TCP connection there is only one request and one response.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/1.1&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It supports connection reuse i.e. for every TCP connection there could be multiple requests and responses, and pipelining where the client can
request several resources from the server at once.&lt;/p&gt;
&lt;p&gt;However, pipelining was hard to implement due to issues such as head-of-line blocking and was not a feasible solution.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/2&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Uses multiplexing, where over a single TCP connection resources to be delivered are interleaved and arrive at the client almost at the same time.&lt;/p&gt;
&lt;p&gt;It is done using streams which can be prioritized, can have dependencies and individual flow control.&lt;/p&gt;
&lt;p&gt;It also provides a feature called server push that allows the server to send data that the client will need but has not yet requested.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://notes.yoooo.fun/assets/Comparison-of-HTTP-versions.jpg"
loading="lazy"
alt="Comparison of HTTP versions"
&gt;&lt;/p&gt;
&lt;h2 id="http-10"&gt;http 1.0
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;No Connection&lt;/p&gt;
&lt;p&gt;Each request from the browser need build a connection with the server, once the server has handled the request and it will stop the tcp connection
immediately.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;No State&lt;/p&gt;
&lt;p&gt;The server do not trace every client, and record the past requests too.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="http-11"&gt;http 1.1
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;persistent connection&lt;/li&gt;
&lt;li&gt;Host header is required&lt;/li&gt;
&lt;li&gt;pipelining&lt;/li&gt;
&lt;li&gt;cache-control&lt;/li&gt;
&lt;li&gt;content negotiation&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="https"&gt;https
&lt;/h2&gt;&lt;p&gt;https ==&amp;gt; HTTP + SSL&lt;/p&gt;
&lt;h2 id="http-20"&gt;http 2.0
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Binary Protocol
&lt;ul&gt;
&lt;li&gt;Low overhead in parsing data — &lt;strong&gt;a critical value proposition in HTTP/2 vs HTTP1&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Less prone to errors.&lt;/li&gt;
&lt;li&gt;Lighter network footprint.&lt;/li&gt;
&lt;li&gt;Effective network resource utilization.&lt;/li&gt;
&lt;li&gt;Reduced network latency and improved throughput.&lt;/li&gt;
&lt;li&gt;Eliminating security concerns associated with the textual nature of HTTP1.x such as response splitting attacks.&lt;/li&gt;
&lt;li&gt;Efficient and robust in terms of processing of data between client and server.&lt;/li&gt;
&lt;li&gt;Compact representation of commands for easier processing and implementation.&lt;/li&gt;
&lt;li&gt;Enables other capabilities of the HTTP/2 including compression, multiplexing, prioritization, flow control and effective handling of TLS.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Request Multiplexing
&lt;ul&gt;
&lt;li&gt;Allows you to download web files asynchronously from one server.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Header Compression&lt;/li&gt;
&lt;li&gt;Server Push
&lt;ul&gt;
&lt;li&gt;The client saves pushed resources in the cache.&lt;/li&gt;
&lt;li&gt;The client can reuse these cached resources across different pages.&lt;/li&gt;
&lt;li&gt;The server can multiplex pushed resources along with originally requested information within the same TCP connection.&lt;/li&gt;
&lt;li&gt;The server can prioritize pushed resources — &lt;strong&gt;a key performance differentiator in HTTP/2 vs HTTP1&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;The client can decline pushed resources to maintain an effective repository of cached resources or disable Server Push entirely.&lt;/li&gt;
&lt;li&gt;The client can also limit the number of pushed streams multiplexed concurrently.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="http-30"&gt;http 3.0
&lt;/h2&gt;</description></item><item><title>VLAN</title><link>https://notes.yoooo.fun/posts/net-vlan/</link><pubDate>Sat, 18 Apr 2020 21:20:37 +0000</pubDate><guid>https://notes.yoooo.fun/posts/net-vlan/</guid><description>&lt;h1 id="vlan"&gt;VLAN
&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a class="link" href="https://www.utepo.net/article/detail/255.html" target="_blank" rel="noopener"
&gt;Get to Know Basic Knwoledge of VLAN(Part 1)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://www.utepo.net/article/detail/295.html" target="_blank" rel="noopener"
&gt;Get to Know Basic Knwoledge of VLAN(Part 2)&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="pros"&gt;Pros
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;reduce broadcast storm&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The key advantage of VLAN is that it can isolate the conflict domain as well as broadcast domain. If there are hundreds of hosts in a LAN, the
network would be completely paralyzed when a broadcast storm happened. Meanwhile, users can divide the broadcast domain through VLAN, limiting the
broadcast to each VLAN, and can not be transferred to cross VLAN. Most important, as consideration to improved security, the broadcasts of
different VLANS can not communicate without a layer 3 router.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;simplify the administration of the network&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;One of the best things about VLAN is that it simplifies management. By logically grouping users into the same virtual networks, you make it easy
to set up and control your policies at a group level. When users physically move workstations, you can keep them on the same network with different
equipment. Or if someone changes teams but not workstations, they can easily be given access to whatever new VLANs they need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>trunk in switch</title><link>https://notes.yoooo.fun/posts/net-switch-trunk/</link><pubDate>Sat, 18 Apr 2020 21:18:09 +0000</pubDate><guid>https://notes.yoooo.fun/posts/net-switch-trunk/</guid><description>&lt;h1 id="trunk"&gt;Trunk
&lt;/h1&gt;&lt;h2 id="overview"&gt;Overview
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a class="link" href="https://wenku.baidu.com/view/6694697d657d27284b73f242336c1eb91a373323.html" target="_blank" rel="noopener"
&gt;https://wenku.baidu.com/view/6694697d657d27284b73f242336c1eb91a373323.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="vlan-between-switches"&gt;vlan between switches
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://notes.yoooo.fun/assets/trunk.png"
loading="lazy"
alt="trunk"
&gt;&lt;/p&gt;
&lt;p&gt;PC1 sends traffic to PC2 after processing its host routing table. These nodes are in the same VLAN but they are connected to different switches. The
basic process:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The Ethernet frame leaves PC1 and is received by Switch 1.&lt;/li&gt;
&lt;li&gt;The Switch 1 SAT indicates that the destination is on the other end of the trunk line.&lt;/li&gt;
&lt;li&gt;Switch 1 uses the trunking protocol to modify the Ethernet frame by adding the VLAN id.&lt;/li&gt;
&lt;li&gt;The new frame leaves the trunk port on Switch1 and is received by Switch 2.&lt;/li&gt;
&lt;li&gt;Switch2 reads the VLAN id and strips off the trunking protocol.&lt;/li&gt;
&lt;li&gt;The original frame is forwarded to the destination (port 4) based on the SAT of Switch 2.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="openstack-trunk"&gt;Openstack Trunk
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://notes.yoooo.fun/assets/20200424170120849.png"
loading="lazy"
alt="openstack trunk port"
&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://object-storage-ca-ymq-1.vexxhost.net/swift/v1/6e4619c416ff4bd19e1c087f27a43eea/www-assets-prod/presentation-media/Neutron-Trunks.pdf" target="_blank" rel="noopener"
&gt;Reference from here1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://www.oreilly.com/library/view/packet-guide-to/9781449311315/ch04.html" target="_blank" rel="noopener"
&gt;Reference from here2&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Let's understand what's lldp.</title><link>https://notes.yoooo.fun/posts/net-lldp/</link><pubDate>Sat, 18 Apr 2020 21:08:20 +0000</pubDate><guid>https://notes.yoooo.fun/posts/net-lldp/</guid><description>&lt;h1 id="lldp"&gt;LLDP
&lt;/h1&gt;&lt;h2 id="overview"&gt;Overview
&lt;/h2&gt;&lt;p&gt;目前，网络设备的种类日益繁多且各自的配置错综复杂，为了使不同厂商的设备能够在网络中相互发现并交互各自的系统及配置信息，需要有一个标准的信息交流平台。&lt;/p&gt;
&lt;p&gt;LLDP（Link Layer Discovery Protocol，&lt;strong&gt;链路层发现协议&lt;/strong&gt;）就是在这样的背景下产生的，它提供了一种标准的链路层发现方式，可以将本端设备的&lt;strong&gt;主要能力&lt;/strong&gt;、**管理地址
**、&lt;strong&gt;设备标识&lt;/strong&gt;、&lt;strong&gt;接口标识&lt;/strong&gt;等信息组织成不同的&lt;code&gt;TLV&lt;/code&gt;（Type/Length/Value，类型/长度/值），并封装在LLDPDU（LLDP Data Unit，&lt;strong&gt;链路层发现协议数据单元&lt;/strong&gt;
）中发布给与自己直连的邻居，邻居收到这些信息后将其以标准MIB（Management Information Base，&lt;strong&gt;管理信息库&lt;/strong&gt;）的形式保存起来，以供网络管理系统查询及判断链路的通信状况。&lt;/p&gt;
&lt;p&gt;类似的还有Cisco Discovery Protocol, Foundry Discovery Protocol, Nortel Discovery Protocol, etc.&lt;/p&gt;
&lt;h2 id="frame-structure"&gt;Frame Structure
&lt;/h2&gt;&lt;p&gt;LLDP的以太帧通常有DST MAC, SRC MAC, EtherType(0x88cc). 以及LLDPDU和FCS组成.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ethernet Frame structure&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: center"&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/Preamble_%28communication%29" target="_blank" rel="noopener"
&gt;Preamble&lt;/a&gt;&lt;/th&gt;
&lt;th style="text-align: center"&gt;Destination MAC&lt;/th&gt;
&lt;th style="text-align: center"&gt;Source MAC&lt;/th&gt;
&lt;th style="text-align: center"&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/Ethertype" target="_blank" rel="noopener"
&gt;Ethertype&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;LLDPDU&lt;/th&gt;
&lt;th style="text-align: center"&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/Frame_check_sequence" target="_blank" rel="noopener"
&gt;Frame check sequence&lt;/a&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;01:80:c2:00:00:0e, or 01:80:c2:00:00:03, or 01:80:c2:00:00:00&lt;/td&gt;
&lt;td style="text-align: center"&gt;Station&amp;rsquo;s address&lt;/td&gt;
&lt;td style="text-align: center"&gt;0x88CC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;LLDPDU&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Chassis ID TLV&lt;/th&gt;
&lt;th&gt;Port ID TLV&lt;/th&gt;
&lt;th&gt;Time to live TLV&lt;/th&gt;
&lt;th&gt;Optional TLV(s)&lt;/th&gt;
&lt;th&gt;End of LLDPDU TLV&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Type=1&lt;/td&gt;
&lt;td&gt;Type=2&lt;/td&gt;
&lt;td&gt;Type=3&lt;/td&gt;
&lt;td&gt;Optional TLV&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;TLV structures&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: center"&gt;Type&lt;/th&gt;
&lt;th style="text-align: center"&gt;Length&lt;/th&gt;
&lt;th style="text-align: center"&gt;Value&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;7 bits&lt;/td&gt;
&lt;td style="text-align: center"&gt;9 bits&lt;/td&gt;
&lt;td style="text-align: center"&gt;0-511 octets&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;TLV type values&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: center"&gt;TLV type&lt;/th&gt;
&lt;th style="text-align: center"&gt;TLV name&lt;/th&gt;
&lt;th style="text-align: center"&gt;Usage in LLDPDU&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;0&lt;/td&gt;
&lt;td style="text-align: center"&gt;End of LLDPDU&lt;/td&gt;
&lt;td style="text-align: center"&gt;Mandatory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;1&lt;/td&gt;
&lt;td style="text-align: center"&gt;Chassis ID&lt;/td&gt;
&lt;td style="text-align: center"&gt;Mandatory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;2&lt;/td&gt;
&lt;td style="text-align: center"&gt;Port ID&lt;/td&gt;
&lt;td style="text-align: center"&gt;Mandatory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;3&lt;/td&gt;
&lt;td style="text-align: center"&gt;Time To Live&lt;/td&gt;
&lt;td style="text-align: center"&gt;Mandatory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;4&lt;/td&gt;
&lt;td style="text-align: center"&gt;Port description&lt;/td&gt;
&lt;td style="text-align: center"&gt;Optional&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;5&lt;/td&gt;
&lt;td style="text-align: center"&gt;System name&lt;/td&gt;
&lt;td style="text-align: center"&gt;Optional&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;6&lt;/td&gt;
&lt;td style="text-align: center"&gt;System description&lt;/td&gt;
&lt;td style="text-align: center"&gt;Optional&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;7&lt;/td&gt;
&lt;td style="text-align: center"&gt;System capabilities&lt;/td&gt;
&lt;td style="text-align: center"&gt;Optional&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;8&lt;/td&gt;
&lt;td style="text-align: center"&gt;Management address&lt;/td&gt;
&lt;td style="text-align: center"&gt;Optional&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;9–126&lt;/td&gt;
&lt;td style="text-align: center"&gt;Reserved&lt;/td&gt;
&lt;td style="text-align: center"&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;127&lt;/td&gt;
&lt;td style="text-align: center"&gt;Custom TLVs&lt;/td&gt;
&lt;td style="text-align: center"&gt;Optional&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Custom TLVs are supported via a TLV type 127. The value of a custom TLV starts with a 24-bit organizationally unique identifier and a 1 byte
organizationally specific subtype followed by data. The basic format for an organizationally specific TLV is shown below:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: center"&gt;Type&lt;/th&gt;
&lt;th style="text-align: center"&gt;Length&lt;/th&gt;
&lt;th style="text-align: center"&gt;Organizationally unique identifier (OUI)&lt;/th&gt;
&lt;th style="text-align: center"&gt;Organizationally defined subtype&lt;/th&gt;
&lt;th style="text-align: center"&gt;Organizationally defined information string&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: center"&gt;7 bits—127&lt;/td&gt;
&lt;td style="text-align: center"&gt;9 bits&lt;/td&gt;
&lt;td style="text-align: center"&gt;24 bits&lt;/td&gt;
&lt;td style="text-align: center"&gt;8 bits&lt;/td&gt;
&lt;td style="text-align: center"&gt;0-507 octets&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;According to IEEE Std 802.1AB, §9.6.1.3, &amp;ldquo;The Organizationally Unique Identifier shall contain the organization&amp;rsquo;s OUI as defined in IEEE Std
802-2001.&amp;rdquo; Each organization is responsible for managing their subtypes.&lt;/p&gt;
&lt;h2 id="work-mechanism"&gt;Work Mechanism
&lt;/h2&gt;&lt;h3 id="lldp工作模式"&gt;LLDP工作模式
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;TxRx: 既发送也接收LLDP报文&lt;/li&gt;
&lt;li&gt;Tx: 只发送LLDP报文&lt;/li&gt;
&lt;li&gt;Rx: 只接收LLDP报文&lt;/li&gt;
&lt;li&gt;Disable: 既不发送也不接收LLDP报文&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当端口的LLDP工作模式发生变化时，端口将对协议状态机进行初始化操作。为了避免端口工作模式频繁改变而导致端口不断执行初始化操作，可配置端口初始化延迟时间，当端口工作模式改变时延迟一段时间再执行初始化操作。&lt;/p&gt;
&lt;h3 id="lldp发送机制"&gt;LLDP发送机制
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;当端口工作在TxRx或Tx模式时，设备会周期性地向邻居设备发送LLDP报文。如果设备的本地配置发生变化则立即发送LLDP报文，以将本地信息的变化情况尽快通知给邻居设备。但为了防止本地信息的频繁变化而引起LLDP报文的大量发送，每发送一个LLDP报文后都需延迟一段时间后再继续发送下一个报文。&lt;/p&gt;
&lt;p&gt;当设备的工作模式由Disable/Rx切换为TxRx/Tx，或者发现了新的邻居设备（即收到一个新的LLDP报文且本地尚未保存发送该报文设备的信息）时，该设备将自动启用快速发送机制，即将LLDP报文的发送周期缩短为1秒，并连续发送指定数量的LLDP报文后再恢复为正常的发送周期。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="lldp接收机制"&gt;LLDP接收机制
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;当端口工作在TxRx或Rx模式时，设备会对收到的LLDP报文及其携带的TLV进行有效性检查，通过检查后再将邻居信息保存到本地，并根据TTL（Time To Live，生存时间）
TLV中TTL的值来设置邻居信息在本地设备上的老化时间，若该值为零，则立刻老化该邻居信息。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a class="link" href="http://www.h3c.com/cn/d_200805/605853_30003_0.htm" target="_blank" rel="noopener"
&gt;H3C LLDP Information&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/Link_Layer_Discovery_Protocol" target="_blank" rel="noopener"
&gt;LLDP wiki&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Switch</title><link>https://notes.yoooo.fun/posts/net-switch/</link><pubDate>Sat, 18 Apr 2020 21:08:13 +0000</pubDate><guid>https://notes.yoooo.fun/posts/net-switch/</guid><description>&lt;h1 id="switch"&gt;switch
&lt;/h1&gt;&lt;h2 id="overview"&gt;Overview
&lt;/h2&gt;&lt;h3 id="link-type"&gt;Link Type
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;The link type of VLAN can be divided into &lt;strong&gt;access link&lt;/strong&gt; and &lt;strong&gt;trunk link&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="access-link"&gt;Access Link
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Access link is part of only one VLAN, and normally is for end devices.&lt;/li&gt;
&lt;li&gt;Any device attached to an access link is unaware of a VLAN membership.&lt;/li&gt;
&lt;li&gt;An access-link connection can understand only standard Ethernet frames.&lt;/li&gt;
&lt;li&gt;Switches remove any VLAN information from the frame before it is sent to an access-link device.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="trunk-link"&gt;Trunk Link
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Trunk link can carry multiple VLAN traffic and normally is used to connect switches to other switches or to routers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="access-port"&gt;Access Port
&lt;/h2&gt;&lt;p&gt;l Belong to &lt;strong&gt;one&lt;/strong&gt; VLAN.&lt;/p&gt;
&lt;p&gt;l Commonly used to connect computer ports.&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;Strip the VLAN information in the packet and forward the packet directly.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="trunk-port"&gt;Trunk Port
&lt;/h2&gt;&lt;p&gt;l Allow &lt;strong&gt;multiple&lt;/strong&gt; VLANs through.&lt;/p&gt;
&lt;p&gt;l Receive and send &lt;strong&gt;multiple&lt;/strong&gt; VLAN packets.&lt;/p&gt;
&lt;p&gt;l Typically used for connection between switches.&lt;/p&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Compare the PVID of the port and the VLAN information in the packet to be transmitted.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If they are the same, proceed to Step 3, otherwise, proceed to Step 4&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Strip the VLAN information in the packet and forward the packet.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Forward the packet directly.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="hybrid-port"&gt;Hybrid Port
&lt;/h2&gt;&lt;p&gt;l Allow &lt;strong&gt;multiple&lt;/strong&gt; VLANs through.&lt;/p&gt;
&lt;p&gt;l Receive and send &lt;strong&gt;multiple&lt;/strong&gt; VLAN packets.&lt;/p&gt;
&lt;p&gt;l Used for connection between switches, or switch and computer.&lt;/p&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Check the VLAN attributes on this port by running the command disp interface to se whether the VLAN attributes is &amp;ldquo;tagged&amp;rdquo; or &amp;ldquo;untagged&amp;rdquo;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If I is untagged, proceed to Step 3, if it is tagged, proceed to step 4.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Strip the VLAN information in the packet and forward the packet.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Forward the packet directly.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="summary"&gt;Summary
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Port Type&lt;/th&gt;
&lt;th style="text-align: left"&gt;Support Mode&lt;/th&gt;
&lt;th&gt;Common use cases&lt;/th&gt;
&lt;th&gt;Comment&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Access&lt;/td&gt;
&lt;td style="text-align: left"&gt;single untagged VLAN&lt;/td&gt;
&lt;td&gt;PC/Printer to switch&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Trunk&lt;/td&gt;
&lt;td style="text-align: left"&gt;single untagged VLAN &amp;amp; multiple tagged VLANs&lt;/td&gt;
&lt;td&gt;switch/hypervisor to switch&lt;/td&gt;
&lt;td&gt;VLAN 1 can be Tagged (Untagged by default)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hybrid&lt;/td&gt;
&lt;td style="text-align: left"&gt;Support Untagged VLANs &amp;amp; Tagged VLANs&lt;/td&gt;
&lt;td&gt;1. Physical Connection: IP Phone to Network Switch Port &amp;amp; a PC to IP Phone’s Switch port; 2. Logical Connection: Voice VLAN as Tagged &amp;amp; Data VLAN as Untagged &amp;amp; Switch port in Trunk mode&lt;/td&gt;
&lt;td&gt;1. Usually the Untagged VLAN number = Native/Default VLAN number; 2. Support for multi-Untagged Frames, usually require the use of protocol-based VLANs; 3. VLAN 1 can be Tagged (Untagged by default)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img src="https://notes.yoooo.fun/assets/switch-egg.jpg"
loading="lazy"
alt="switch-egg"
&gt;&lt;/p&gt;</description></item></channel></rss>