<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Build on Aurora</title><link>https://notes.yoooo.fun/tags/build/</link><description>Recent content in Build on Aurora</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 24 Nov 2023 10:25:42 +0000</lastBuildDate><atom:link href="https://notes.yoooo.fun/tags/build/index.xml" rel="self" type="application/rss+xml"/><item><title>Why go build/test is so slow on Windows</title><link>https://notes.yoooo.fun/posts/golang-build-slow-on-windows/</link><pubDate>Fri, 24 Nov 2023 10:25:42 +0000</pubDate><guid>https://notes.yoooo.fun/posts/golang-build-slow-on-windows/</guid><description>&lt;style&gt;
r { color: Red }
o { color: Orange }
g { color: Lime }
aquamarine { color: aquamarine }
pp { color: Violet }
aqua { color: aqua }
&lt;/style&gt;
&lt;h1 id="why-go-build-or-go-test-is-so-slow-on-windows"&gt;Why &lt;code&gt;go build&lt;/code&gt; or &lt;code&gt;go test&lt;/code&gt; is &lt;o&gt;so slow&lt;/o&gt; on Windows
&lt;/h1&gt;&lt;h2 id="problem"&gt;Problem
&lt;/h2&gt;&lt;p&gt;When you run &lt;code&gt;go build&lt;/code&gt; or &lt;code&gt;go test&lt;/code&gt; on Windows, it is very slow.&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;go build&lt;/code&gt; costs &lt;g&gt;10s&lt;/g&gt; on Linux, it may cost &lt;r&gt;70s or more&lt;/r&gt; on Windows, which is so annoying.&lt;/p&gt;
&lt;h2 id="reason"&gt;Reason
&lt;/h2&gt;&lt;p&gt;The reason is that Windows Defender scans the files generated by &lt;code&gt;go build&lt;/code&gt; or &lt;code&gt;go test&lt;/code&gt; in real time, which causes the slow.&lt;/p&gt;
&lt;h2 id="solution"&gt;Solution
&lt;/h2&gt;&lt;p&gt;Exclude the files used by &lt;code&gt;go&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%userprofile%\go\&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%localappdata%\go-build\&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;YOUR GO CODE DIR&amp;gt;&lt;/code&gt;, e.g. &lt;code&gt;%userprofile%\JetBrains\&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;Open Windows Defender Security Center&lt;/li&gt;
&lt;li&gt;Click &amp;ldquo;&lt;pp&gt;Virus &amp;amp; threat protection&lt;/pp&gt;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Click &amp;ldquo;&lt;pp&gt;Virus &amp;amp; threat protection settings&lt;/pp&gt;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Click &amp;ldquo;&lt;pp&gt;Add or remove exclusions&lt;/pp&gt;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Click &amp;ldquo;&lt;pp&gt;Add an exclusion&lt;/pp&gt;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Click &amp;ldquo;&lt;pp&gt;Folder&lt;/pp&gt;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Select the above folders one by one&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="btw"&gt;BTW
&lt;/h2&gt;&lt;p&gt;Maybe you can also exclude the process &lt;code&gt;go.exe&lt;/code&gt; in &amp;ldquo;&lt;pp&gt;Exclusions&lt;/pp&gt;&amp;rdquo; page, but I haven&amp;rsquo;t tried it.&lt;/p&gt;</description></item></channel></rss>